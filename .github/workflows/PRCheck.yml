name: C/C++ CI

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:

    runs-on: ubuntu-20.04
    steps:
      - name: Get JRE
        uses: actions/setup-java@v1
        with:
          java-version: '8'
          java-package: jre
          architecture: x64

      - name: Setup Ballerina pack
        run: |
          curl -L  https://maven.pkg.github.com/ballerina-platform/ballerina-lang/org/ballerinalang/jballerina-tools/2.0.0-Preview2-nballerina-r1/jballerina-tools-2.0.0-Preview2-nballerina-r1.zip -u "${{ github.actor }}:${{ secrets.GITHUB_TOKEN }}" -o jballerina-tools-2.0.0-Preview2-nballerina-r1.zip
          du -sh jballerina-tools-2.0.0-Preview2-nballerina-r1.zip
          unzip -q jballerina-tools-2.0.0-Preview2-nballerina-r1.zip
          cd jballerina-tools-2.0.0-Preview2-nballerina-r1/bin
          export PATH=$PATH:$(pwd)
          cd 
          ballerina -v
